<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garagem Inteligente V3 - CRUD Completo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">

        <aside id="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-warehouse"></i><h1>Garagem V3</h1>
            </div>
            <button id="btnAbrirModalAdicionar" class="botao-sidebar-add">
                <i class="fas fa-plus-circle"></i> Adicionar Novo Veículo
            </button>
             <div class="lista-veiculos-container card">
                 <h2><i class="fas fa-car"></i> Meus Veículos</h2>
                 <ul id="listaVeiculosSidebar">
                     <li class="placeholder">Nenhum veículo na garagem.</li>
                 </ul>
             </div>
        </aside>

        <main id="main-content">
            <div id="notification-area" class="">
                <span id="notification-message"></span>
                <button class="close-btn" title="Fechar notificação" aria-label="Fechar notificação">×</button>
            </div>

            <div id="painelVeiculoSelecionado" style="display: none;" class="card">
                 <div class="vehicle-header">
                     <img id="imagemVeiculo" src="imagens/carro_normal.png" alt="Imagem do veículo">
                     <div id="informacoesVeiculo">
                         <h2 id="info-modelo-placa">Modelo (Placa)</h2>
                         <p><i class="fas fa-car-side"></i> Marca: <span id="info-marca">N/A</span></p>
                         <p><i class="fas fa-palette"></i> Cor: <span id="info-cor">N/A</span></p>
                         <p><i class="fas fa-calendar-alt"></i> Ano: <span id="info-ano">N/A</span></p>
                         <p><i class="fas fa-id-card"></i> ID: <span id="info-id" class="info-id-text">N/A</span></p>
                     </div>
                     <button id="botaoRemoverHeader" class="botao-remover-header" title="Excluir este veículo">
                        <i class="fas fa-trash-alt"></i> Remover
                    </button>
                 </div>
                 
                 <div id="painelDeControle" class="card-inner">
                    <div class="status-motor-container">
                        <i class="fas fa-power-off"></i>
                        Status do Motor: <span id="info-status-motor">Desconhecido</span>
                    </div>

                    <div class="velocimetro-container">
                        <svg class="velocimetro-svg" viewBox="0 0 100 100">
                            <path class="velocimetro-trilha" d="M 50,50 m 0,-40 a 40,40 0 1 1 0,80 a 40,40 0 1 1 0,-80" stroke-dasharray="251.2" stroke-dashoffset="0"></path>
                            <path id="velocimetro-progresso" class="velocimetro-progresso" d="M 50,50 m 0,-40 a 40,40 0 1 1 0,80 a 40,40 0 1 1 0,-80"></path>
                        </svg>
                        <div id="velocimetro-texto" class="velocimetro-texto">0 km/h</div>
                    </div>

                    <div id="botoesAcoes" class="botoes-container">
                        <button id="botaoLigarDesligar"><i class="fas fa-power-off"></i> Ligar</button>
                        <button id="botaoAcelerar" disabled><i class="fas fa-gas-pump"></i> Acelerar</button>
                        <button id="botaoFrear" disabled><i class="fas fa-brake"></i> Frear</button>
                    </div>
                </div>

                 <div class="manutencao-container">
                    <div id="formManutencaoContainer" class="card-inner">
                        <h3><i class="fas fa-tools"></i> Adicionar Manutenção</h3>
                        <form id="formNovaManutencao">
                            <input type="hidden" id="manutencaoVeiculoId">
                            <div>
                                <label for="manutencaoDescricao"><i class="fas fa-comment-dots"></i> Descrição do Serviço:</label>
                                <input type="text" id="manutencaoDescricao" name="descricaoServico" required placeholder="Ex: Troca de óleo e filtro">
                            </div>
                            <div>
                                <label for="manutencaoCusto"><i class="fas fa-dollar-sign"></i> Custo (R$):</label>
                                <input type="number" id="manutencaoCusto" name="custo" required min="0" step="0.01" placeholder="Ex: 150.50">
                            </div>
                            <div>
                                <label for="manutencaoKm"><i class="fas fa-tachometer-alt"></i> Quilometragem (Opcional):</label>
                                <input type="number" id="manutencaoKm" name="quilometragem" min="0" placeholder="Ex: 85000">
                            </div>
                            <button type="submit" class="botao-info"><i class="fas fa-plus-circle"></i> Registrar Manutenção</button>
                        </form>
                    </div>

                    <div class="maintenance-list card-inner">
                        <h3><i class="fas fa-history"></i> Histórico de Manutenções</h3>
                        <ul id="listaManutencoesVeiculo">
                            <li class="placeholder">Nenhum registro de manutenção.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="mensagem-selecione" style="display: block;" class="card">
                <h2><i class="fas fa-info-circle"></i> Bem-vindo à Garagem V3!</h2>
                <p>Adicione um veículo para começar ou gerencie os veículos existentes na lista à esquerda.</p>
                <p>Clique em um veículo na lista para ver seus detalhes e controles.</p>
            </div>
        </main>
    </div>

    <dialog id="modalAdicionarVeiculo">
        <form id="formNovoVeiculo" novalidate>
            <h2><i class="fas fa-plus-circle"></i> Adicionar Novo Veículo</h2>
            <div>
                <label for="novoVeiculoPlaca"><i class="fas fa-digital-tachograph"></i>Placa:</label>
                <input type="text" id="novoVeiculoPlaca" name="placa" required placeholder="Ex: ABC1D23">
            </div>
            <div>
                <label for="novoVeiculoMarca"><i class="fas fa-industry"></i>Marca:</label>
                <input type="text" id="novoVeiculoMarca" name="marca" required placeholder="Ex: Volkswagen">
            </div>
            <div>
                <label for="novoVeiculoModelo"><i class="fas fa-car-rear"></i>Modelo:</label>
                <input type="text" id="novoVeiculoModelo" name="modelo" required placeholder="Ex: Fusca">
            </div>
            <div>
                <label for="novoVeiculoAno"><i class="fas fa-calendar"></i>Ano:</label>
                <input type="number" id="novoVeiculoAno" name="ano" required placeholder="Ex: 1970">
            </div>
            <div>
                <label for="novoVeiculoCor"><i class="fas fa-palette"></i>Cor:</label>
                <input type="text" id="novoVeiculoCor" name="cor" required placeholder="Ex: Azul">
            </div>
            <div class="modal-actions">
                <button type="submit"><i class="fas fa-save"></i> Adicionar</button>
                <button type="button" id="btnFecharModalAdicionar" class="botao-cancelar"><i class="fas fa-times"></i> Cancelar</button>
            </div>
        </form>
    </dialog>

    <dialog id="modalEditarVeiculo">
        <form id="formEditarVeiculo" novalidate>
            <h2><i class="fas fa-edit"></i> Editar Veículo</h2>
            <input type="hidden" id="editVeiculoId">
            <div>
                <label for="editVeiculoPlaca"><i class="fas fa-digital-tachograph"></i>Placa:</label>
                <input type="text" id="editVeiculoPlaca" name="placa" required placeholder="Ex: ABC1D23">
            </div>
            <div>
                <label for="editVeiculoMarca"><i class="fas fa-industry"></i>Marca:</label>
                <input type="text" id="editVeiculoMarca" name="marca" required placeholder="Ex: Volkswagen">
            </div>
            <div>
                <label for="editVeiculoModelo"><i class="fas fa-car-rear"></i>Modelo:</label>
                <input type="text" id="editVeiculoModelo" name="modelo" required placeholder="Ex: Fusca">
            </div>
            <div>
                <label for="editVeiculoAno"><i class="fas fa-calendar"></i>Ano:</label>
                <input type="number" id="editVeiculoAno" name="ano" required placeholder="Ex: 1970">
            </div>
            <div>
                <label for="editVeiculoCor"><i class="fas fa-palette"></i>Cor:</label>
                <input type="text" id="editVeiculoCor" name="cor" required placeholder="Ex: Azul">
            </div>
            <div class="modal-actions">
                <button type="submit"><i class="fas fa-save"></i> Salvar Alterações</button>
                <button type="button" id="btnFecharModalEditar" class="botao-cancelar"><i class="fas fa-times"></i> Cancelar</button>
            </div>
        </form>
    </dialog>

    <script type="module" src="js/principal.js"></script>
</body>
</html>